<!DOCTYPE html>
<html lang="en"><!--
 __  __                __                                     __
/\ \/\ \              /\ \             __                    /\ \
\ \ \_\ \   __  __    \_\ \      __   /\_\      __       ___ \ \ \/'\
 \ \  _  \ /\ \/\ \   /'_` \   /'__`\ \/\ \   /'__`\    /'___\\ \ , <
  \ \ \ \ \\ \ \_\ \ /\ \L\ \ /\  __/  \ \ \ /\ \L\.\_ /\ \__/ \ \ \\`\
   \ \_\ \_\\/`____ \\ \___,_\\ \____\ _\ \ \\ \__/.\_\\ \____\ \ \_\ \_\
    \/_/\/_/ `/___/> \\/__,_ / \/____//\ \_\ \\/__/\/_/ \/____/  \/_/\/_/
                /\___/                \ \____/
                \/__/                  \/___/

Powered by Hydejack v7.5.2 <https://qwtel.com/hydejack/>
-->




<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta http-equiv="x-ua-compatible" content="ie=edge">


  
<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Third Party Scripts (v6.3) | Jinyoungの日本IT生活話</title>
<meta name="generator" content="Jekyll v3.8.3" />
<meta property="og:title" content="Third Party Scripts (v6.3)" />
<meta name="author" content="Jinyoung Kim" />
<meta property="og:locale" content="en_uk" />
<meta name="description" content="Hydejack v6.3 makes including third party plugins easier." />
<meta property="og:description" content="Hydejack v6.3 makes including third party plugins easier." />
<link rel="canonical" href="http://localhost:4000/2017/06/06/third-party-scripts/" />
<meta property="og:url" content="http://localhost:4000/2017/06/06/third-party-scripts/" />
<meta property="og:site_name" content="Jinyoungの日本IT生活話" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-06-06T00:00:00+09:00" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@" />
<meta name="twitter:creator" content="@Jinyoung Kim" />
<script type="application/ld+json">
{"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2017/06/06/third-party-scripts/"},"url":"http://localhost:4000/2017/06/06/third-party-scripts/","author":{"@type":"Person","name":"Jinyoung Kim"},"headline":"Third Party Scripts (v6.3)","dateModified":"2017-06-06T00:00:00+09:00","description":"Hydejack v6.3 makes including third party plugins easier.","datePublished":"2017-06-06T00:00:00+09:00","@type":"BlogPosting","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/assets/icons/icon.png"},"name":"Jinyoung Kim"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  

  
    <meta name="keywords" content="IT,韓国,일본취업">
  


<meta name="mobile-web-app-capable" content="yes">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="Jinyoungの日本IT生活話">
<meta name="apple-mobile-web-app-status-bar-style" content="black">

<meta name="application-name" content="Jinyoungの日本IT生活話">
<meta name="msapplication-config" content="/assets/ieconfig.xml">


<meta name="theme-color" content="#4fb1ba">


<meta name="generator" content="Hydejack v7.5.2">

<link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Jinyoungの日本IT生活話" />



<link rel="alternate" href="http://localhost:4000/2017/06/06/third-party-scripts/" hreflang="en-uk">

<link rel="shortcut icon" href="/assets/icons/favicon.ico">
<link rel="apple-touch-icon" href="/assets/icons/icon.png">

<link rel="manifest" href="/assets/manifest.json">


  <link rel="dns-prefetch" href="https://fonts.googleapis.com">
  <link rel="dns-prefetch" href="https://fonts.gstatic.com">







<link id="_katexJS"  rel="dns-prefetch" href="/assets/bower_components/katex/dist/katex.min.js">
<link id="_katexCSS" rel="dns-prefetch" href="/assets/bower_components/katex/dist/katex.min.css">

<script>
  function stdOnEnd(n,e){n.onload=function(){this.onerror=this.onload=null,e(null,n)},n.onerror=function(){this.onerror=this.onload=null,e(new Error("Failed to load "+this.src),n)}}function ieOnEnd(n,e){n.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,e(null,n))}}window.setRelStylesheet=function(n){function e(){this.rel="stylesheet"}var o=document.getElementById(n);o.addEventListener?o.addEventListener("load",e,!1):o.onload=e},window._loaded=!1,window.loadJSDeferred=function(n,e){function o(){window._loaded=!0;var o=document.createElement("script");o.src=n,e&&(("onload"in o?stdOnEnd:ieOnEnd)(o,e),o.onload||stdOnEnd(o,e));var t=document.scripts[0];t.parentNode.insertBefore(o,t)}window._loaded?o():window.addEventListener?window.addEventListener("load",o,!1):window.onload=o};
!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);
!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);

  window._noPushState = false;
  window._noDrawer = false;
</script>

<!--[if gt IE 8]><!---->


<script>
  WebFontConfig = {
    
    google: {
      families: ['Roboto+Slab:700','Noto+Sans:400,400i,700,700i']
    },
    

    custom: {
      families: ['icomoon'],
      urls: ['/assets/icomoon/style.css']
    }
  };
  (function(d) {
    var wf = d.createElement('script'), s = d.scripts[0];
    wf.src = "/assets/bower_components/webfontloader/webfontloader.js";
    s.parentNode.insertBefore(wf, s);
  }(document));
</script>
<!--<![endif]-->

<noscript>
  
  

  
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab:700%7CNoto+Sans:400,400i,700,700i">
    <style>
      html { font-family: Noto Sans, Helvetica, Arial, sans-serif }
      h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6, .heading { font-family: Roboto Slab, Helvetica, Arial, sans-serif }
    </style>
  

  <link rel="stylesheet" href="/assets/icomoon/style.css">
</noscript>

<!--[if gt IE 8]><!---->



  <link rel="stylesheet" href="/assets/css/hydejack-7.5.2.css">



<style id="_pageStyle">

.content a:not(.btn){color:#4fb1ba;border-color:rgba(79,177,186,0.2)}.content a:not(.btn):hover{border-color:#4fb1ba}:focus{outline-color:#4fb1ba}.btn-primary{color:#fff;background-color:#4fb1ba;border-color:#4fb1ba}.btn-primary:focus,.btn-primary.focus{box-shadow:0 0 0 3px rgba(79,177,186,0.5)}.btn-primary:hover,.btn-primary.hover{color:#fff;background-color:#409ba3;border-color:#409ba3}.btn-primary:disabled,.btn-primary.disabled{color:#fff;background-color:#4fb1ba;border-color:#4fb1ba}.btn-primary:active,.btn-primary.active{color:#fff;background-color:#409ba3;border-color:#409ba3}::selection{color:#fff;background:#4fb1ba}::-moz-selection{color:#fff;background:#4fb1ba}

</style>

<!--<![endif]-->




</head>

<body>
  <div class="navbar fixed-top">
  <div class="content">
    <div class="nav-btn-bar">
      <span class="sr-only">Jump to:</span>
      <a id="_menu" class="nav-btn no-hover" href="#_navigation">
        <span class="sr-only">Navigation</span>
        <span class="icon-menu"></span>
      </a>
    </div>
  </div>
</div>


<hy-push-state>
  <main
    id="_main"
    class="content fade-in layout-post"
    role="main"
    data-color="#4fb1ba"
    data-theme-color=""
    
      data-image="/assets/img/sidebar-bg.jpg"
      data-overlay
    
    >
    


<article id="post-2017-06-06-third-party-scripts" class="page post" role="article">
  <header>
    <h1 class="post-title">
      
        Third Party Scripts (v6.3)
      
    </h1>

    <p class="post-date heading">
      
      <time datetime="2017-06-06T00:00:00+09:00">06 Jun 2017</time>
      
      
      
      
      











      









on <span>Hydejack</span>

    </p>

    



  
    <p class="message" >
      Hydejack v6.3 makes including third party plugins easier.

    </p>
  


  </header>

  
    <p>This release makes including third party plugins easier.
Until now, the push state approach to loading new pages has been interfering with embedded <code class="highlighter-rouge">script</code> tags.
This version changes this by simulating the sequential loading of script tags on a fresh page load.</p>

<p>This approach should work in a majority of cases, but can still cause problems with scripts that can’t be added more than once per page.
If an issue can’t be resolved, there’s now the option to disable push state by setting <code class="highlighter-rouge">disable_push_state: true</code> in <code class="highlighter-rouge">config.yml</code>.</p>

<h2 id="whats-happening">What’s happening?</h2>
<p>The problem is as follows:
When the browser encounters a <code class="highlighter-rouge">script</code> tag while parsing a HTML page it will stop (possibly to make a request to fetch
an external script) and then execute the code before continuing parsing the page
(it’s easy to how this can make your page really slow, but that’s a different topic).</p>

<p>In any case, due of this behavior you can do things like include jQuery,
then run code that depends on jQuery in the next script tag:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">".../jquery.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script&gt;</span>
  <span class="nx">$</span><span class="p">(</span><span class="s1">'#tabs'</span><span class="p">).</span><span class="nx">someJQueryFunction</span><span class="p">();</span> <span class="c1">// works</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></div></div>

<p>I’d consider this an anti-pattern for the reason mentioned above,
but it remains common and has the advantage of being easy to understand.</p>

<p>However, things break when Hydejack dynamically inserts new content into the page.
It works fine for standard markdown content like <code class="highlighter-rouge">p</code> tags,
but when inserting <code class="highlighter-rouge">script</code> tags the browser will execute them immediately and in parallel,
because in most cases this is what you’d want.
However, this means that <code class="highlighter-rouge">$('#tabs').someJQueryFunction();</code> will run while the HTTP request for jQuery is still
in progress — and we get an error that <code class="highlighter-rouge">$</code> isn’t defined, or similar.</p>

<p>From this description the solution should be obvious: Insert the <code class="highlighter-rouge">script</code> tags one-by-one,
to simulate how they would get executed if it was a fresh page request.
In fact this is how Hydejack is now handling things (and thanks to rxjs’ <code class="highlighter-rouge">concatMap</code> it was easy to implement),
but unfortunately this is not a magic solution that can fix all problems:</p>

<ul>
  <li>Some scripts may throw when running on the same page twice</li>
  <li>Some scripts rely on the document’s <code class="highlighter-rouge">load</code> event, which has fired long before the script was inserted</li>
  <li>unkown-unkowns</li>
</ul>

<p>But what will “magically” solve all third party script problems, is disabling dynamic page loading altogether,
for which there’s now an option.
To make this a slightly less bitter pill to swallow,
there’s now a CSS-only “intro” animation that looks similar to the dynamic one.
Maybe you won’t even notice the difference.</p>

<h2 id="patch-notes">Patch Notes</h2>
<h3 id="minor">Minor</h3>
<ul>
  <li>Support embedding <code class="highlighter-rouge">script</code> tags in markdown content</li>
  <li>Add <code class="highlighter-rouge">disable_push_state</code> option to <code class="highlighter-rouge">_config.yml</code></li>
  <li>Add <code class="highlighter-rouge">disable_drawer</code> option to <code class="highlighter-rouge">_config.yml</code></li>
  <li>Rename syntax highlighting file to <code class="highlighter-rouge">syntax.scss</code></li>
  <li>Added <a href="/docs/7.5.2/scripts/">chapter on third party scripts</a> to documentation</li>
</ul>

<h3 id="design">Design</h3>
<ul>
  <li>Add subtle intro animation</li>
  <li>Rename “Check out X for more” to “See X for more” on welcome* page</li>
  <li>Replace “»” with “→” in “read more”-type of links</li>
</ul>

<h3 id="fixes">Fixes</h3>
<ul>
  <li>Fix default color in gem-based theme</li>
</ul>


  
</article>


<hr class="dingbat related" />




  
     


  <aside class="about related mt4 mb4" role="complementary">
    
    

<div class="author mt4">
  

  
    
  

  

  
  <img
    src="https://placehold.it/128x128"
    class="avatar"
    alt="<firstname> <lastname>"
    srcset="https://placehold.it/128x128 1x,https://placehold.it/256x256 2x"
    
    
  />


  

  
  
  <h2  class="page-title hr">
    About
  </h2>

  <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit,
sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>

<p>Open <code class="highlighter-rouge">_data/authors.yml</code> to edit this text.</p>


  <div class="sidebar-social">
    <span class="sr-only">Social:</span>
<ul>
  

  

  
    













<li>
  <a href="https://twitter.com/<username>" title="Twitter" class="no-mark-external">
    <span class="icon-twitter"></span>
    <span class="sr-only">Twitter</span>
  </a>
</li>

  
    













<li>
  <a href="https://github.com/<username>" title="GitHub" class="no-mark-external">
    <span class="icon-github"></span>
    <span class="sr-only">GitHub</span>
  </a>
</li>

  
</ul>

  </div>
</div>

  </aside>


  

  
  

  
    




<aside class="related mb4" role="complementary">
  <h2 class="hr">Related Posts</h2>

  <ul class="related-posts">
    
      


<li>
  <a href="/2017/11/17/hydejacks-new-design/" class="h4 flip-title">
    <span>Hydejack's New Design</span>
  </a>
  <time class="heading faded fine" datetime="2017-11-17T00:00:00+09:00">17 Nov 2017</time>
</li>

    
      


<li>
  <a href="/2017/07/27/better-gem-support/" class="h4 flip-title">
    <span>Better Gem Support (v6.5)</span>
  </a>
  <time class="heading faded fine" datetime="2017-07-27T00:00:00+09:00">27 Jul 2017</time>
</li>

    
      


<li>
  <a href="/2017/06/21/related-projects-and-data-tables/" class="h4 flip-title">
    <span>Related Projects and Data Tables (v6.4)</span>
  </a>
  <time class="heading faded fine" datetime="2017-06-21T00:00:00+09:00">21 Jun 2017</time>
</li>

    
  </ul>
</aside>


  

  
  


    


    <footer role="contentinfo">
  <hr/>
  
    <p><small class="copyright">キム・ジニョン © 2020. All rights reserved.
</small></p>
  
  
  <p><small>Powered by <a class="external" href="https://qwtel.com/hydejack/">Hydejack</a> v<span id="_version">7.5.2</span></small></p>
  <hr class="sr-only"/>
</footer>

  </main>
  <hy-drawer>
  <header id="_sidebar" class="sidebar" role="banner">
    
    <div class="sidebar-bg sidebar-overlay" style="background-color:#4fb1ba;background-image:url(/assets/img/sidebar-bg.jpg)"></div>

    <div class="sidebar-sticky">
      <div class="sidebar-about">
        <h2 class="h1"><a href="/">Jinyoungの日本IT生活話</a></h2>
        
        
          <p class="">
            私は東京で働いている韓国人の開発者です。 趣味で勉強しながら、困ったことを解決したり、 面白い技術を紹介できるブログになるようにします。
ありがとうございます。

          </p>
        
      </div>

      <nav class="sidebar-nav heading" role="navigation">
        <span class="sr-only">Navigation:</span>
<ul>
  
  
  
  
    
      <li>
        <a
          id="_navigation"
          href="/tag/java/"
          class="sidebar-nav-item"
          
          >
          Java
        </a>
      </li>
    
  
    
      <li>
        <a
          
          href="/tag/%E3%81%9D%E3%81%AE%E4%BB%96/"
          class="sidebar-nav-item"
          
          >
          その他
        </a>
      </li>
    
  
    
      <li>
        <a
          
          href="/about/"
          class="sidebar-nav-item"
          
          >
          About
        </a>
      </li>
    
  
    
      <li>
        <a
          
          href="/docs/7.5.2/"
          class="sidebar-nav-item"
          
          >
          Documentation
        </a>
      </li>
    
  
</ul>

      </nav>

      

      <div class="sidebar-social">
        <span class="sr-only">Social:</span>
<ul>
  

  

  
    













<li>
  <a href="https://twitter.com/<username>" title="Twitter" class="no-mark-external">
    <span class="icon-twitter"></span>
    <span class="sr-only">Twitter</span>
  </a>
</li>

  
    













<li>
  <a href="https://github.com/<username>" title="GitHub" class="no-mark-external">
    <span class="icon-github"></span>
    <span class="sr-only">GitHub</span>
  </a>
</li>

  
</ul>

      </div>
    </div>
  </header>
</hy-drawer>

</hy-push-state>


  

  <!--[if gt IE 9]><!---->
  
  <script>loadJSDeferred('/assets/js/hydejack-7.5.2.js');</script>
  
  <!--<![endif]-->



  
<hr class="sr-only"/>
<h2 class="sr-only">Templates (for web app):</h2>

<template id="_animation-template">
  <div class="animation-main fixed-top">
    <div class="content">
      <div class="page"></div>
    </div>
  </div>
</template>

<template id="_loading-template">
  <div class="loading">
    <span class="sr-only">Loading…</span>
    <span class="icon-cog"></span>
  </div>
</template>

<template id="_error-template">
  <div class="page">
    <h1 class="page-title">Error</h1>
    
    
    <p class="lead">
      Sorry, an error occurred while loading <a class="this-link" href=""></a>.

    </p>
  </div>
</template>

<template id="_back-template">
  <a id="_back" class="back nav-btn no-hover">
    <span class="sr-only">Back</span>
    <span class="icon-arrow-left2"></span>
  </a>
</template>

<template id="_permalink-template">
  <a href="#" class="permalink">
    <span class="sr-only">Permalink</span>
    <span class="icon-link"></span>
  </a>
</template>



</body>
</html>
